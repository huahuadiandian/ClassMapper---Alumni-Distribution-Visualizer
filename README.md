# 同学蹭饭地图生成器


一个智能生成同学大学分布地图的工具，帮助您快速可视化同学们的大学分布情况，生成交互式蹭饭地图和统计图表。

## 功能亮点

- 🗺️ **交互式蹭饭地图**：基于高德/腾讯地图，展示同学分布
- ☁️ **学校分布词云**：直观展示各校人数分布
- 📊 **详细统计报表**：生成Excel格式的分布统计
- 📱 **移动端优化**：在手机和电脑上都能完美显示
- ⚡ **智能定位**：自动获取大学地理位置
- 💾 **缓存机制**：避免重复查询地理位置

## 安装与使用

### 前置要求
- Python 3.7+
- pip 包管理器

### 安装步骤

1. 克隆仓库：
```bash
git clone https://github.com/yourusername/cengfan-map.git
cd cengfan-map
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

### 使用方法

1. 准备Excel数据文件：
   - 包含"姓名"和"学校"两列
   - 示例格式：
     | 姓名   | 学校         |
     |--------|--------------|
     | 张三   | 北京大学     |
     | 李四   | 清华大学     |

2. 运行程序：
```bash
python main.py
```

3. 按提示操作：
   - 输入Excel文件路径
   - 程序会自动处理数据并生成结果

## 输出文件

程序将生成以下文件到`蹭饭地图结果`目录：

1. **蹭饭地图.html**  
   - 交互式地图，支持缩放、点击查看详情
   - 自动聚类显示密集区域
   - 支持高德/腾讯地图切换

2. **学校分布词云.png**  
   - 可视化各学校人数分布
   - 使用不同大小字体表示人数多少

3. **大学分布统计.xlsx**  
   - 包含三个工作表：
     1. 城市分布统计
     2. 学校分布统计
     3. 原始数据

4. **location_cache.json**  
   - 地理位置查询缓存
   - 加速后续运行，可手动编辑

## 示例输出

### 蹭饭地图示例

### 学校分布词云

### 统计报表


## 自定义选项

1. **修改地图样式**：  
   编辑生成的HTML文件中的CSS部分，调整地图外观

2. **手动更新位置**：  
   编辑`location_cache.json`文件，添加或修改位置信息：
   ```json
   {
     "北京大学": {
       "city": "北京市",
       "coords": [39.9997, 116.3264],
       "address": "北京市海淀区颐和园路5号"
     }
   }
   ```

3. **调整词云样式**：  
   修改`generate_wordcloud`函数中的参数：
   ```python
   wordcloud = WordCloud(
       font_path=font_path,
       width=1200,          # 调整宽度
       height=600,          # 调整高度
       background_color='white',  # 背景色
       max_words=50,        # 最多显示的词数
       colormap='tab20'     # 颜色主题
   )
   ```

## 贡献指南

欢迎贡献！请遵循以下步骤：

1. Fork 项目仓库
2. 创建新分支 (`git checkout -b feature/your-feature`)
3. 提交更改 (`git commit -am 'Add some feature'`)
4. 推送到分支 (`git push origin feature/your-feature`)
5. 创建Pull Request

## 常见问题

**Q: 程序无法定位某些学校怎么办？**  
A: 可以手动编辑`location_cache.json`文件，添加正确的经纬度和地址信息

**Q: 生成的词云中文显示为方框？**  
A: 请确保系统安装了中文字体，或指定中文字体路径

**Q: 地图加载缓慢怎么办？**  
A: 程序首次运行需要获取地理位置信息，后续运行会使用缓存加速

## 许可证

本项目采用 [MIT 许可证](LICENSE)

---

**让同学聚会更有趣，一键生成你的专属蹭饭地图！** 🎓📍
